import { __decorate } from "tslib";
import { Component, Input, Output, ElementRef, Renderer2, OnInit, OnDestroy, EventEmitter } from '@angular/core';
import { FBMLAttribute, FBMLComponent, FBMLInstanceMethod } from '../fbml-component';
/**
 * @name Embedded Video
 * @shortdesc Component to embed Facebook videos
 * @fbdoc https://developers.facebook.com/docs/plugins/embedded-video-player
 * @description Component to embed Facebook videos and control them.
 * @usage
 * ```html
 * <!-- basic usage -->
 * <fb-video href="https://www.facebook.com/facebook/videos/10153231379946729/"></fb-video>
 *
 * <!-- event emitters -->
 * <fb-video href="https://www.facebook.com/facebook/videos/10153231379946729/" (paused)="onVideoPaused($event)"></fb-video>
 * ```
 *
 * To manually interact with the video player, fetch it using `ViewChild`.
 *
 * ```ts
 * import { Component, ViewChild } from '@angular/core';
 * import { FBVideoComponent } from 'ngx-facebook-sdk';
 *
 * @Component(...)
 * export class MyComponent {
 *
 *   @ViewChild(FBVideoComponent) video: FBVideoComponent;
 *
 *   ngAfterViewInit() {
 *     this.video.play();
 *     this.video.pause();
 *     this.video.getVolume();
 *   }
 *
 * }
 *
 * ```
 */
import * as ɵngcc0 from '@angular/core';
let FBVideoComponent = class FBVideoComponent extends FBMLComponent {
    constructor(el, rnd) {
        super(el, rnd, 'fb-video');
        /**
         * Fired when video starts to play.
         */
        this.startedPlaying = new EventEmitter();
        /**
         * Fired when video pauses.
         */
        this.paused = new EventEmitter();
        /**
         *
         Fired when video finishes playing.
         */
        this.finishedPlaying = new EventEmitter();
        /**
         * Fired when video starts to buffer.
         */
        this.startedBuffering = new EventEmitter();
        /**
         * Fired when video recovers from buffering.
         */
        this.finishedBuffering = new EventEmitter();
        /**
         * Fired when an error occurs on the video.
         */
        this.error = new EventEmitter();
        this._listeners = [];
        this.nativeElement.id = this._id = 'video-' + String(Math.floor((Math.random() * 10000) + 1));
    }
    /**
     * @hidden
     */
    ngOnInit() {
        FB.Event.subscribe('xfbml.ready', (msg) => {
            if (msg.type === 'video' && msg.id === this._id) {
                this._instance = msg.instance;
                this._listeners.push(this._instance.subscribe('startedPlaying', (e) => this.startedPlaying.emit(e)), this._instance.subscribe('paused', (e) => this.paused.emit(e)), this._instance.subscribe('finishedPlaying', (e) => this.finishedPlaying.emit(e)), this._instance.subscribe('startedBuffering', (e) => this.startedBuffering.emit(e)), this._instance.subscribe('finishedBuffering', (e) => this.finishedBuffering.emit(e)), this._instance.subscribe('error', (e) => this.error.emit(e)));
            }
        });
    }
    /**
     * @hidden
     */
    ngOnDestroy() {
        this._listeners.forEach(l => {
            if (typeof l.release === 'function') {
                l.release();
            }
        });
    }
    /**
     * Plays the video.
     */
    play() { }
    /**
     * Pauses the video.
     */
    pause() { }
    /**
     * Seeks to specified position.
     * @param seconds {number}
     */
    seek(seconds) { }
    /**
     * Mute the video.
     */
    mute() { }
    /**
     * Unmute the video.
     */
    unmute() { }
    /**
     * Returns true if video is muted, false if not.
     */
    isMuted() { return; }
    /**
     * Set the volume
     * @param volume
     */
    setVolume(volume) { }
    /**
     * Get the volume
     */
    getVolume() { return; }
    /**
     * Returns the current video time position in seconds
     */
    getCurrentPosition() { }
    /**
     * Returns the video duration in seconds
     */
    getDuration() { }
};
FBVideoComponent.ɵfac = function FBVideoComponent_Factory(t) { return new (t || FBVideoComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
FBVideoComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FBVideoComponent, selectors: [["fb-video"]], inputs: { href: "href", allowfullscreen: "allowfullscreen", autoplay: "autoplay", width: "width", showText: "showText", showCaptions: "showCaptions" }, outputs: { startedPlaying: "startedPlaying", paused: "paused", finishedPlaying: "finishedPlaying", startedBuffering: "startedBuffering", finishedBuffering: "finishedBuffering", error: "error" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 0, vars: 0, template: function FBVideoComponent_Template(rf, ctx) { }, encapsulation: 2 });
FBVideoComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "href", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "allowfullscreen", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "autoplay", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "width", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "showText", void 0);
__decorate([
    Input(),
    FBMLAttribute
], FBVideoComponent.prototype, "showCaptions", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "startedPlaying", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "paused", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "finishedPlaying", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "startedBuffering", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "finishedBuffering", void 0);
__decorate([
    Output()
], FBVideoComponent.prototype, "error", void 0);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "play", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "pause", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "seek", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "mute", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "unmute", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "isMuted", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "setVolume", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getVolume", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getCurrentPosition", null);
__decorate([
    FBMLInstanceMethod
], FBVideoComponent.prototype, "getDuration", null);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FBVideoComponent, [{
        type: Component,
        args: [{
                selector: 'fb-video',
                template: ''
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { startedPlaying: [{
            type: Output
        }], paused: [{
            type: Output
        }], finishedPlaying: [{
            type: Output
        }], startedBuffering: [{
            type: Output
        }], finishedBuffering: [{
            type: Output
        }], error: [{
            type: Output
        }], href: [{
            type: Input
        }], allowfullscreen: [{
            type: Input
        }], autoplay: [{
            type: Input
        }], width: [{
            type: Input
        }], showText: [{
            type: Input
        }], showCaptions: [{
            type: Input
        }] }); })();
export { FBVideoComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmItdmlkZW8uanMiLCJzb3VyY2VzIjpbIm5nOi9uZ3gtZmFjZWJvb2svY29tcG9uZW50cy9mYi12aWRlby9mYi12aWRlby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakgsT0FBTyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUdyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBS0gsSUFBYSxnQkFBZ0IsR0FBN0IsTUFBYSxnQkFBaUIsU0FBUSxhQUFhO0FBQUcsSUF1RnBELFlBQ0UsRUFBYyxFQUNkLEdBQWM7QUFDZixRQUNDLEtBQUssQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQy9CLFFBOUNFO0FBQ0Y7QUFFQSxXQURLO0FBQ0wsUUFDRSxtQkFBYyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0FBQzlELFFBQ0U7QUFDRjtBQUVBLFdBREs7QUFDTCxRQUNFLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztBQUN0RCxRQUNFO0FBQ0Y7QUFDTTtBQUVBLFdBREQ7QUFDTCxRQUNFLG9CQUFlLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7QUFDL0QsUUFDRTtBQUNGO0FBRUEsV0FESztBQUNMLFFBQ0UscUJBQWdCLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7QUFDaEUsUUFDRTtB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TSxFQUFFO0FBQ1gsMERBQWdFO0FBTTlEO0FBQWEsSUFEWixNQUFNLEVBQUU7QUFDWCwyREFBaUU7QUFNL0Q7QUFBYSxJQURaLE1BQU0sRUFBRTtBQUNYLCtDQUFxRDtBQWdEbkQ7QUFFQSxJQUhDLGtCQUFrQjtBQUNyQiw0Q0FBVztBQU1UO0FBRUQsSUFIRSxrQkFBa0I7QUFDckIsNkNBQVk7QUFPVjtBQUFhLElBRFosa0JBQWtCO0FBQ3JCLDRDQUEwQjtBQU14QjtBQUVBLElBSEMsa0JBQWtCO0FBQ3JCLDRDQUFXO0FBTVQ7QUFFRixJQUhHLGtCQUFrQjtBQUNyQiw4Q0FBYTtBQU1YO0FBQWEsSUFEWixrQkFBa0I7QUFDckIsK0NBQWdDO0FBTzlCO0FBQWEsSUFEWixrQkFBa0I7QUFDckIsaURBQThCO0FBTTVCO0FBQWEsSUFEWixrQkFBa0I7QUFDckIsaURBQWlDO0FBTS9CO0FBQWEsSUFEWixrQkFBa0I7QUFDckIsMERBQXlCO0FBTXZCO0FBQWEsSUFEWixrQkFBa0I7QUFDckIsbURBQWtCO0FBekxMLGdCQUFnQixvQkFKNUIsU0FBUyxDQUFDLFVBQ1QsUUFBUSxFQUFFO0NBQVUsVUFDcEIsUUFBUSxFQUFFLEVBQUU7SUFDYixDQUFDLElBQ1c7UUFBZ0IsQ0EyTDVCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQ0Q7QUFBQyxTQTVMWSxnQkFBZ0I7QUFBSSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBPbkluaXQsIE9uRGVzdHJveSwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGQk1MQXR0cmlidXRlLCBGQk1MQ29tcG9uZW50LCBGQk1MSW5zdGFuY2VNZXRob2QgfSBmcm9tICcuLi9mYm1sLWNvbXBvbmVudCc7XG5kZWNsYXJlIHZhciBGQjogYW55O1xuXG4vKipcbiAqIEBuYW1lIEVtYmVkZGVkIFZpZGVvXG4gKiBAc2hvcnRkZXNjIENvbXBvbmVudCB0byBlbWJlZCBGYWNlYm9vayB2aWRlb3NcbiAqIEBmYmRvYyBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvcGx1Z2lucy9lbWJlZGRlZC12aWRlby1wbGF5ZXJcbiAqIEBkZXNjcmlwdGlvbiBDb21wb25lbnQgdG8gZW1iZWQgRmFjZWJvb2sgdmlkZW9zIGFuZCBjb250cm9sIHRoZW0uXG4gKiBAdXNhZ2VcbiAqIGBgYGh0bWxcbiAqIDwhLS0gYmFzaWMgdXNhZ2UgLS0+XG4gKiA8ZmItdmlkZW8gaHJlZj1cImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9mYWNlYm9vay92aWRlb3MvMTAxNTMyMzEzNzk5NDY3MjkvXCI+PC9mYi12aWRlbz5cbiAqXG4gKiA8IS0tIGV2ZW50IGVtaXR0ZXJzIC0tPlxuICogPGZiLXZpZGVvIGhyZWY9XCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vZmFjZWJvb2svdmlkZW9zLzEwMTUzMjMxMzc5OTQ2NzI5L1wiIChwYXVzZWQpPVwib25WaWRlb1BhdXNlZCgkZXZlbnQpXCI+PC9mYi12aWRlbz5cbiAqIGBgYFxuICpcbiAqIFRvIG1hbnVhbGx5IGludGVyYWN0IHdpdGggdGhlIHZpZGVvIHBsYXllciwgZmV0Y2ggaXQgdXNpbmcgYFZpZXdDaGlsZGAuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IENvbXBvbmVudCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKiBpbXBvcnQgeyBGQlZpZGVvQ29tcG9uZW50IH0gZnJvbSAnbmd4LWZhY2Vib29rLXNkayc7XG4gKlxuICogQENvbXBvbmVudCguLi4pXG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQge1xuICpcbiAqICAgQFZpZXdDaGlsZChGQlZpZGVvQ29tcG9uZW50KSB2aWRlbzogRkJWaWRlb0NvbXBvbmVudDtcbiAqXG4gKiAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAqICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcbiAqICAgICB0aGlzLnZpZGVvLnBhdXNlKCk7XG4gKiAgICAgdGhpcy52aWRlby5nZXRWb2x1bWUoKTtcbiAqICAgfVxuICpcbiAqIH1cbiAqXG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZmItdmlkZW8nLFxuICB0ZW1wbGF0ZTogJydcbn0pXG5leHBvcnQgY2xhc3MgRkJWaWRlb0NvbXBvbmVudCBleHRlbmRzIEZCTUxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cbiAgcHJpdmF0ZSBfaW5zdGFuY2U6IGFueTtcblxuICAvKipcbiAgICogVGhlIGFic29sdXRlIFVSTCBvZiB0aGUgdmlkZW8uXG4gICAqL1xuICBASW5wdXQoKVxuICBARkJNTEF0dHJpYnV0ZVxuICBocmVmOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFsbG93IHRoZSB2aWRlbyB0byBiZSBwbGF5ZWQgaW4gZnVsbHNjcmVlbiBtb2RlLiBDYW4gYmUgZmFsc2Ugb3IgdHJ1ZS4gRGVmYXVsdHMgdG8gZmFsc2U7XG4gICAqL1xuICBASW5wdXQoKVxuICBARkJNTEF0dHJpYnV0ZVxuICBhbGxvd2Z1bGxzY3JlZW46IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEF1dG9tYXRpY2FsbHkgc3RhcnQgcGxheWluZyB0aGUgdmlkZW8gd2hlbiB0aGUgcGFnZSBsb2Fkcy4gVGhlIHZpZGVvIHdpbGwgYmUgcGxheWVkIHdpdGhvdXQgc291bmQgKG11dGVkKS4gUGVvcGxlIGNhbiB0dXJuIG9uIHNvdW5kIHZpYSB0aGUgdmlkZW8gcGxheWVyIGNvbnRyb2xzLiBUaGlzIHNldHRpbmcgZG9lcyBub3QgYXBwbHkgdG8gbW9iaWxlIGRldmljZXMuIENhbiBiZSBmYWxzZSBvciB0cnVlLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIGF1dG9wbGF5OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIHZpZGVvIGNvbnRhaW5lci4gTWluLiAyMjBweC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIHdpZHRoOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIHRvIGluY2x1ZGUgdGhlIHRleHQgZnJvbSB0aGUgRmFjZWJvb2sgcG9zdCBhc3NvY2lhdGVkIHdpdGggdGhlIHZpZGVvLCBpZiBhbnkuXG4gICAqL1xuICBASW5wdXQoKVxuICBARkJNTEF0dHJpYnV0ZVxuICBzaG93VGV4dDogYm9vbGVhbjtcblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gc2hvdyBjYXB0aW9ucyAoaWYgYXZhaWxhYmxlKSBieSBkZWZhdWx0LiBDYXB0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgb24gZGVza3RvcC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIEBGQk1MQXR0cmlidXRlXG4gIHNob3dDYXB0aW9uczogYm9vbGVhbjtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiB2aWRlbyBzdGFydHMgdG8gcGxheS5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBzdGFydGVkUGxheWluZzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiB2aWRlbyBwYXVzZXMuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgcGF1c2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKlxuICAgRmlyZWQgd2hlbiB2aWRlbyBmaW5pc2hlcyBwbGF5aW5nLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIGZpbmlzaGVkUGxheWluZzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiB2aWRlbyBzdGFydHMgdG8gYnVmZmVyLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIHN0YXJ0ZWRCdWZmZXJpbmc6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdmlkZW8gcmVjb3ZlcnMgZnJvbSBidWZmZXJpbmcuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgZmluaXNoZWRCdWZmZXJpbmc6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIG9uIHRoZSB2aWRlby5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBwcml2YXRlIF9pZDogc3RyaW5nO1xuXG4gIHByaXZhdGUgX2xpc3RlbmVyczogYW55W10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbDogRWxlbWVudFJlZixcbiAgICBybmQ6IFJlbmRlcmVyMlxuICApIHtcbiAgICBzdXBlcihlbCwgcm5kLCAnZmItdmlkZW8nKTtcbiAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuaWQgPSB0aGlzLl9pZCA9ICd2aWRlby0nICsgU3RyaW5nKE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkgKyAxKSk7XG4gIH1cblxuICAvKipcbiAgICogQGhpZGRlblxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgRkIuRXZlbnQuc3Vic2NyaWJlKCd4ZmJtbC5yZWFkeScsIChtc2c6IGFueSkgPT4ge1xuICAgICAgaWYgKG1zZy50eXBlID09PSAndmlkZW8nICYmIG1zZy5pZCA9PT0gdGhpcy5faWQpIHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBtc2cuaW5zdGFuY2U7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKFxuICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnN1YnNjcmliZSgnc3RhcnRlZFBsYXlpbmcnLCAoZTogYW55KSA9PiB0aGlzLnN0YXJ0ZWRQbGF5aW5nLmVtaXQoZSkpLFxuICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnN1YnNjcmliZSgncGF1c2VkJywgKGU6IGFueSkgPT4gdGhpcy5wYXVzZWQuZW1pdChlKSksXG4gICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc3Vic2NyaWJlKCdmaW5pc2hlZFBsYXlpbmcnLCAoZTogYW55KSA9PiB0aGlzLmZpbmlzaGVkUGxheWluZy5lbWl0KGUpKSxcbiAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5zdWJzY3JpYmUoJ3N0YXJ0ZWRCdWZmZXJpbmcnLCAoZTogYW55KSA9PiB0aGlzLnN0YXJ0ZWRCdWZmZXJpbmcuZW1pdChlKSksXG4gICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc3Vic2NyaWJlKCdmaW5pc2hlZEJ1ZmZlcmluZycsIChlOiBhbnkpID0+IHRoaXMuZmluaXNoZWRCdWZmZXJpbmcuZW1pdChlKSksXG4gICAgICAgICAgdGhpcy5faW5zdGFuY2Uuc3Vic2NyaWJlKCdlcnJvcicsIChlOiBhbnkpID0+IHRoaXMuZXJyb3IuZW1pdChlKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGlmICh0eXBlb2YgbC5yZWxlYXNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGwucmVsZWFzZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXlzIHRoZSB2aWRlby5cbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgcGxheSgpIHt9XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgdmlkZW8uXG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIHBhdXNlKCkge31cblxuICAvKipcbiAgICogU2Vla3MgdG8gc3BlY2lmaWVkIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gc2Vjb25kcyB7bnVtYmVyfVxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBzZWVrKHNlY29uZHM6IG51bWJlcikge31cblxuICAvKipcbiAgICogTXV0ZSB0aGUgdmlkZW8uXG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIG11dGUoKSB7fVxuXG4gIC8qKlxuICAgKiBVbm11dGUgdGhlIHZpZGVvLlxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICB1bm11dGUoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdmlkZW8gaXMgbXV0ZWQsIGZhbHNlIGlmIG5vdC5cbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgaXNNdXRlZCgpOiBib29sZWFuIHsgcmV0dXJuOyB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdm9sdW1lXG4gICAqIEBwYXJhbSB2b2x1bWVcbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7fVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvbHVtZVxuICAgKi9cbiAgQEZCTUxJbnN0YW5jZU1ldGhvZFxuICBnZXRWb2x1bWUoKTogbnVtYmVyIHsgcmV0dXJuOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdmlkZW8gdGltZSBwb3NpdGlvbiBpbiBzZWNvbmRzXG4gICAqL1xuICBARkJNTEluc3RhbmNlTWV0aG9kXG4gIGdldEN1cnJlbnRQb3NpdGlvbigpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZpZGVvIGR1cmF0aW9uIGluIHNlY29uZHNcbiAgICovXG4gIEBGQk1MSW5zdGFuY2VNZXRob2RcbiAgZ2V0RHVyYXRpb24oKSB7fVxuXG59XG4iXX0=